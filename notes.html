<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OMNI Notes - Ultimate Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(180deg, #0f172a, #020617);
      color: #e5e7eb;
      overflow: hidden;
      height: 100vh;
    }

    .notes-app {
      display: flex;
      height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 300px;
      background: rgba(15, 23, 42, 0.95);
      border-right: 1px solid rgba(56, 189, 248, 0.2);
      display: flex;
      flex-direction: column;
      transition: transform 0.3s;
    }

    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid rgba(56, 189, 248, 0.1);
    }

    .sidebar-header h1 {
      font-size: 1.5rem;
      margin: 0 0 12px 0;
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .theme-toggle {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .theme-btn {
      flex: 1;
      padding: 8px;
      background: rgba(56, 189, 248, 0.1);
      border: 1px solid rgba(56, 189, 248, 0.2);
      border-radius: 6px;
      color: #38bdf8;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
    }

    .theme-btn.active {
      background: rgba(56, 189, 248, 0.3);
      border-color: #38bdf8;
    }

    .search-box {
      position: relative;
      margin-bottom: 12px;
    }

    .search-box input {
      width: 100%;
      padding: 10px 12px 10px 36px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(56, 189, 248, 0.2);
      border-radius: 8px;
      color: white;
      transition: all 0.3s;
    }

    .search-box input:focus {
      outline: none;
      border-color: #38bdf8;
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0.5;
    }

    .new-note-btn {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 12px;
    }

    .new-note-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(56, 189, 248, 0.4);
    }

    .folder-section {
      margin-top: 12px;
      padding: 12px;
      background: rgba(56, 189, 248, 0.05);
      border-radius: 8px;
    }

    .folder-title {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 8px;
      opacity: 0.7;
    }

    .folder-item {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 6px;
      margin-bottom: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .folder-item:hover {
      background: rgba(56, 189, 248, 0.1);
      transform: translateX(4px);
    }

    .folder-item.active {
      background: rgba(56, 189, 248, 0.2);
    }

    .notes-list {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
    }

    .note-item {
      padding: 12px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid transparent;
      position: relative;
    }

    .note-item:hover {
      background: rgba(56, 189, 248, 0.1);
      border-color: rgba(56, 189, 248, 0.3);
      transform: translateX(4px);
    }

    .note-item.active {
      background: rgba(56, 189, 248, 0.15);
      border-color: rgba(56, 189, 248, 0.5);
    }

    .note-item.favorite::before {
      content: '‚≠ê';
      position: absolute;
      top: 8px;
      right: 8px;
      font-size: 0.9rem;
    }

    .note-item-title {
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 0.95rem;
    }

    .note-item-preview {
      font-size: 0.85rem;
      opacity: 0.6;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .note-item-meta {
      display: flex;
      justify-content: space-between;
      margin-top: 6px;
      font-size: 0.75rem;
      opacity: 0.5;
    }

    .note-item-tags {
      display: flex;
      gap: 4px;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .mini-tag {
      padding: 2px 6px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 4px;
      font-size: 0.7rem;
    }

    /* Editor Area */
    .editor-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: rgba(15, 23, 42, 0.5);
    }

    .editor-toolbar {
      padding: 16px 24px;
      background: rgba(15, 23, 42, 0.9);
      border-bottom: 1px solid rgba(56, 189, 248, 0.2);
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .toolbar-group {
      display: flex;
      gap: 8px;
      padding-right: 12px;
      border-right: 1px solid rgba(56, 189, 248, 0.1);
    }

    .toolbar-btn {
      padding: 8px 12px;
      background: rgba(56, 189, 248, 0.1);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 8px;
      color: #38bdf8;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.9rem;
    }

    .toolbar-btn:hover {
      background: rgba(56, 189, 248, 0.2);
      transform: translateY(-2px);
    }

    .toolbar-btn.active {
      background: rgba(56, 189, 248, 0.3);
      border-color: #38bdf8;
    }

    .voice-btn {
      background: rgba(239, 68, 68, 0.1);
      border-color: rgba(239, 68, 68, 0.3);
      color: #f87171;
    }

    .voice-btn.recording {
      background: rgba(239, 68, 68, 0.3);
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .editor-stats {
      margin-left: auto;
      display: flex;
      gap: 16px;
      font-size: 0.85rem;
      opacity: 0.6;
    }

    .editor-content {
      flex: 1;
      padding: 32px;
      overflow-y: auto;
      max-width: 900px;
      margin: 0 auto;
      width: 100%;
    }

    .note-title-input {
      width: 100%;
      font-size: 2.5rem;
      font-weight: 700;
      background: transparent;
      border: none;
      color: white;
      margin-bottom: 16px;
      padding: 8px 0;
    }

    .note-title-input:focus {
      outline: none;
    }

    .note-title-input::placeholder {
      color: rgba(255, 255, 255, 0.3);
    }

    .note-editor {
      width: 100%;
      min-height: 400px;
      background: transparent;
      border: none;
      color: white;
      font-size: 1.1rem;
      line-height: 1.8;
      resize: none;
      font-family: inherit;
    }

    .note-editor:focus {
      outline: none;
    }

    .note-editor::placeholder {
      color: rgba(255, 255, 255, 0.3);
    }

    /* Rich Text Editor */
    .rich-editor {
      width: 100%;
      min-height: 400px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(56, 189, 248, 0.2);
      border-radius: 12px;
      padding: 20px;
      color: white;
      font-size: 1.1rem;
      line-height: 1.8;
      outline: none;
    }

    /* Empty State */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 40px;
    }

    .empty-icon {
      font-size: 5rem;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .empty-state h2 {
      font-size: 1.8rem;
      margin-bottom: 12px;
      opacity: 0.8;
    }

    .empty-state p {
      opacity: 0.5;
      margin-bottom: 24px;
    }

    /* Tags */
    .note-tags {
      display: flex;
      gap: 8px;
      margin-top: 16px;
      flex-wrap: wrap;
    }

    .tag {
      padding: 6px 12px;
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.4);
      border-radius: 12px;
      font-size: 0.85rem;
      color: #a5b4fc;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tag:hover {
      background: rgba(99, 102, 241, 0.3);
      transform: scale(1.05);
    }

    .tag-input {
      padding: 6px 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 12px;
      color: white;
      font-size: 0.85rem;
      outline: none;
    }

    /* AI Suggestions */
    .ai-suggestions {
      margin-top: 20px;
      padding: 16px;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 12px;
    }

    .ai-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #a5b4fc;
    }

    .suggestion-item {
      padding: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 6px;
      margin-bottom: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .suggestion-item:hover {
      background: rgba(56, 189, 248, 0.1);
      transform: translateX(4px);
    }

    /* Templates Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-content {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      padding: 32px;
      border-radius: 20px;
      max-width: 600px;
      width: 90%;
      border: 1px solid rgba(56, 189, 248, 0.3);
    }

    .modal-title {
      font-size: 1.8rem;
      margin-bottom: 20px;
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .template-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    .template-card {
      padding: 20px;
      background: rgba(56, 189, 248, 0.1);
      border: 1px solid rgba(56, 189, 248, 0.3);
      border-radius: 12px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s;
    }

    .template-card:hover {
      background: rgba(56, 189, 248, 0.2);
      transform: translateY(-4px);
    }

    .template-icon {
      font-size: 2rem;
      margin-bottom: 8px;
    }

    /* Light Theme */
    body.light {
      background: linear-gradient(180deg, #f1f5f9, #e2e8f0);
      color: #1e293b;
    }

    body.light .sidebar,
    body.light .editor-toolbar {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(56, 189, 248, 0.2);
    }

    body.light .note-title-input,
    body.light .note-editor {
      color: #1e293b;
    }

    body.light .note-item,
    body.light .folder-item,
    body.light .toolbar-btn {
      color: #1e293b;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(56, 189, 248, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(56, 189, 248, 0.5);
    }

    /* Mobile */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        z-index: 50;
        transform: translateX(-100%);
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .mobile-toggle {
        display: block;
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #38bdf8, #6366f1);
        border-radius: 50%;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: 0 10px 30px rgba(56, 189, 248, 0.5);
        z-index: 100;
      }
    }
  </style>
</head>
<body>

<div class="notes-app">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h1>üìù OMNI Notes</h1>
      
      <div class="theme-toggle">
        <button class="theme-btn active" onclick="setTheme('dark')">üåô Dark</button>
        <button class="theme-btn" onclick="setTheme('light')">‚òÄÔ∏è Light</button>
        <button class="theme-btn" onclick="setTheme('auto')">‚ö° Auto</button>
      </div>
      
      <div class="search-box">
        <span class="search-icon">üîç</span>
        <input type="text" placeholder="Search notes..." id="searchInput" oninput="searchNotes()">
      </div>
      
      <button class="new-note-btn" onclick="createNewNote()">+ New Note</button>
      <button class="new-note-btn" onclick="showTemplates()" style="background: rgba(99, 102, 241, 0.3);">üìã Templates</button>
      
      <div class="folder-section">
        <div class="folder-title">FOLDERS</div>
        <div class="folder-item active" onclick="filterByFolder('all')">
          <span>üìÅ</span> All Notes
        </div>
        <div class="folder-item" onclick="filterByFolder('favorites')">
          <span>‚≠ê</span> Favorites
        </div>
        <div class="folder-item" onclick="filterByFolder('work')">
          <span>üíº</span> Work
        </div>
        <div class="folder-item" onclick="filterByFolder('personal')">
          <span>üë§</span> Personal
        </div>
      </div>
    </div>

    <div class="notes-list" id="notesList"></div>
  </div>

  <!-- Editor Area -->
  <div class="editor-area">
    <div id="emptyState" class="empty-state">
      <div class="empty-icon">üìù</div>
      <h2>Welcome to OMNI Notes</h2>
      <p>The ultimate note-taking experience</p>
      <button class="new-note-btn" style="max-width: 200px;" onclick="createNewNote()">+ New Note</button>
    </div>

    <div id="editorContainer" style="display: none; flex-direction: column; flex: 1;">
      <div class="editor-toolbar">
        <div class="toolbar-group">
          <button class="toolbar-btn" onclick="formatText('bold')" title="Bold (Ctrl+B)"><strong>B</strong></button>
          <button class="toolbar-btn" onclick="formatText('italic')" title="Italic (Ctrl+I)"><em>I</em></button>
          <button class="toolbar-btn" onclick="formatText('underline')" title="Underline (Ctrl+U)"><u>U</u></button>
          <button class="toolbar-btn" onclick="formatText('strike')"><s>S</s></button>
        </div>
        
        <div class="toolbar-group">
          <button class="toolbar-btn" onclick="insertBullet()">‚Ä¢ List</button>
          <button class="toolbar-btn" onclick="insertNumber()">1. Numbered</button>
          <button class="toolbar-btn" onclick="insertCheckbox()">‚òë Checklist</button>
        </div>
        
        <div class="toolbar-group">
          <button class="toolbar-btn" onclick="insertHeading()">H Heading</button>
          <button class="toolbar-btn" onclick="insertQuote()">‚ùù Quote</button>
          <button class="toolbar-btn" onclick="insertCode()">{ } Code</button>
        </div>
        
        <div class="toolbar-group">
          <button class="toolbar-btn voice-btn" id="voiceBtn" onclick="startVoice()">üé§ Voice</button>
          <button class="toolbar-btn" onclick="toggleFavorite()">‚≠ê Favorite</button>
        </div>
        
        <div class="toolbar-group">
          <button class="toolbar-btn" onclick="aiSummarize()">ü§ñ Summarize</button>
          <button class="toolbar-btn" onclick="exportNote()">üì• Export</button>
          <button class="toolbar-btn" onclick="deleteCurrentNote()" style="color: #f87171; border-color: rgba(239, 68, 68, 0.3);">üóë Delete</button>
        </div>
        
        <div class="editor-stats">
          <span id="wordCount">0 words</span>
          <span id="charCount">0 chars</span>
          <span id="readTime">0 min</span>
        </div>
      </div>

      <div class="editor-content">
        <input 
          type="text" 
          class="note-title-input" 
          id="noteTitle" 
          placeholder="Untitled Note"
          oninput="updateCurrentNote()"
        >
        
        <textarea 
          class="note-editor" 
          id="noteEditor" 
          placeholder="Start writing... or use voice input üé§"
          oninput="updateCurrentNote(); updateStats(); checkAI()"
        ></textarea>
        
        <div class="note-tags" id="noteTags">
          <input type="text" class="tag-input" placeholder="+ Add tag" id="tagInput" onkeypress="addTag(event)">
        </div>
        
        <div class="ai-suggestions" id="aiSuggestions" style="display: none;">
          <div class="ai-title">ü§ñ AI Suggestions</div>
          <div id="suggestionsList"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Templates Modal -->
<div class="modal" id="templatesModal">
  <div class="modal-content">
    <h2 class="modal-title">Choose a Template</h2>
    <div class="template-grid">
      <div class="template-card" onclick="useTemplate('meeting')">
        <div class="template-icon">üë•</div>
        <div>Meeting Notes</div>
      </div>
      <div class="template-card" onclick="useTemplate('journal')">
        <div class="template-icon">üìî</div>
        <div>Daily Journal</div>
      </div>
      <div class="template-card" onclick="useTemplate('todo')">
        <div class="template-icon">‚úÖ</div>
        <div>To-Do List</div>
      </div>
      <div class="template-card" onclick="useTemplate('brainstorm')">
        <div class="template-icon">üí°</div>
        <div>Brainstorm</div>
      </div>
      <div class="template-card" onclick="useTemplate('recipe')">
        <div class="template-icon">üç≥</div>
        <div>Recipe</div>
      </div>
      <div class="template-card" onclick="useTemplate('project')">
        <div class="template-icon">üìä</div>
        <div>Project Plan</div>
      </div>
    </div>
    <button class="new-note-btn" onclick="hideTemplates()">Cancel</button>
  </div>
</div>

<button class="mobile-toggle" onclick="toggleSidebar()" style="display: none;">üìù</button>

<script>
let notes = JSON.parse(localStorage.getItem('omniNotes')) || [];
let currentNoteId = null;
let currentFolder = 'all';
let recognition = null;
let isRecording = false;

const templates = {
  meeting: {
    title: 'Meeting Notes - ' + new Date().toLocaleDateString(),
    content: `Meeting Date: ${new Date().toLocaleDateString()}
Attendees: 

Agenda:
‚Ä¢ 

Discussion:


Action Items:
‚Ä¢ 

Next Steps:
`
  },
  journal: {
    title: 'Journal - ' + new Date().toLocaleDateString(),
    content: `${new Date().toLocaleDateString()}

Today I'm feeling:

What happened today:


Grateful for:


Tomorrow's goals:
`
  },
  todo: {
    title: 'To-Do List',
    content: `Today's Tasks:
‚òê 
‚òê 
‚òê 

This Week:
‚òê 
‚òê 

Later:
‚òê 
`
  },
  brainstorm: {
    title: 'Brainstorm Session',
    content: `Topic: 

Ideas:
‚Ä¢ 
‚Ä¢ 
‚Ä¢ 

Best Ideas:


Next Actions:
`
  },
  recipe: {
    title: 'Recipe',
    content: `Recipe Name:

Ingredients:
‚Ä¢ 
‚Ä¢ 

Instructions:
1. 
2. 

Notes:
`
  },
  project: {
    title: 'Project Plan',
    content: `Project: 

Goals:
‚Ä¢ 

Timeline:


Tasks:
‚òê 
‚òê 

Resources Needed:
`
  }
};

function init() {
  renderNotes();
  if (notes.length > 0) {
    loadNote(notes[0].id);
  }
  initVoice();
}

function createNewNote() {
  const note = {
    id: Date.now(),
    title: '',
    content: '',
    created: new Date().toISOString(),
    updated: new Date().toISOString(),
    tags: [],
    favorite: false,
    folder: 'personal'
  };
  
  notes.unshift(note);
  saveNotes();
  renderNotes();
  loadNote(note.id);
}

function useTemplate(type) {
  const template = templates[type];
  const note = {
    id: Date.now(),
    title: template.title,
    content: template.content,
    created: new Date().toISOString(),
    updated: new Date().toISOString(),
    tags: [type],
    favorite: false,
    folder: 'personal'
  };
  
  notes.unshift(note);
  saveNotes();
  renderNotes();
  loadNote(note.id);
  hideTemplates();
}

function renderNotes() {
  const list = document.getElementById('notesList');
  
  let filtered = notes;
  if (currentFolder === 'favorites') {
    filtered = notes.filter(n => n.favorite);
  } else if (currentFolder !== 'all') {
    filtered = notes.filter(n => n.folder === currentFolder);
  }
  
  if (filtered.length === 0) {
    list.innerHTML = '<div style="text-align: center; opacity: 0.5; padding: 20px;">No notes</div>';
    return;
  }
  
  list.innerHTML = filtered.map(note => {
    const preview = note.content.substring(0, 60) || 'Empty note';
    const date = new Date(note.updated).toLocaleDateString();
    const active = note.id === currentNoteId ? 'active' : '';
    const fav = note.favorite ? 'favorite' : '';
    const tags = note.tags.slice(0, 3).map(t => `<span class="mini-tag">${t}</span>`).join('');
    
    return `
      <div class="note-item ${active} ${fav}" onclick="loadNote(${note.id})">
        <div class="note-item-title">${note.title || 'Untitled'}</div>
        <div class="note-item-preview">${preview}</div>
        <div class="note-item-tags">${tags}</div>
        <div class="note-item-meta">
          <span>${date}</span>
          <span>${note.content.split(' ').filter(w => w).length} words</span>
        </div>
      </div>
    `;
  }).join('');
}

function loadNote(id) {
  const note = notes.find(n => n.id === id);
  if (!note) return;
  
  currentNoteId = id;
  
  document.getElementById('emptyState').style.display = 'none';
  document.getElementById('editorContainer').style.display = 'flex';
  
  document.getElementById('noteTitle').value = note.title;
  document.getElementById('noteEditor').value = note.content;
  
  renderTags(note.tags);
  updateStats();
  renderNotes();
}

function updateCurrentNote() {
  if (!currentNoteId) return;
  
  const note = notes.find(n => n.id === currentNoteId);
  if (!note) return;
  
  note.title = document.getElementById('noteTitle').value;
  note.content = document.getElementById('noteEditor').value;
  note.updated = new Date().toISOString();
  
  saveNotes();
  renderNotes();
}

function updateStats() {
  const content = document.getElementById('noteEditor').value;
  const words = content.trim() ? content.trim().split(/\s+/).filter(w => w).length : 0;
  const chars = content.length;
  const<parameter name="readTime = Math.max(1, Math.ceil(words / 200));
document.getElementById('wordCount').textContent = ${words} words;
document.getElementById('charCount').textContent = ${chars} chars;
document.getElementById('readTime').textContent = ${readTime} min;
}
function renderTags(tags) {
const container = document.getElementById('noteTags');
const tagHTML = tags.map(tag =>
<span class="tag" onclick="removeTag('${tag}')">${tag} ‚úï</span>
).join('');
container.innerHTML = tagHTML + '<input type="text" class="tag-input" placeholder="+ Add tag" id="tagInput" onkeypress="addTag(event)">';
}
function addTag(e) {
if (e.key !== 'Enter') return;
e.preventDefault();
const input = document.getElementById('tagInput');
const tag = input.value.trim().toLowerCase();
if (!tag || !currentNoteId) return;
const note = notes.find(n => n.id === currentNoteId);
if (!note.tags.includes(tag)) {
note.tags.push(tag);
saveNotes();
renderTags(note.tags);
renderNotes();
}
input.value = '';
}
function removeTag(tag) {
if (!currentNoteId) return;
const note = notes.find(n => n.id === currentNoteId);
note.tags = note.tags.filter(t => t !== tag);
saveNotes();
renderTags(note.tags);
renderNotes();
}
function toggleFavorite() {
if (!currentNoteId) return;
const note = notes.find(n => n.id === currentNoteId);
note.favorite = !note.favorite;
saveNotes();
renderNotes();
}
function deleteCurrentNote() {
if (!currentNoteId) return;
if (!confirm('Delete this note?')) return;
notes = notes.filter(n => n.id !== currentNoteId);
saveNotes();
currentNoteId = null;
if (notes.length > 0) {
loadNote(notes[0].id);
} else {
document.getElementById('emptyState').style.display = 'flex';
document.getElementById('editorContainer').style.display = 'none';
}
renderNotes();
}
function searchNotes() {
const query = document.getElementById('searchInput').value.toLowerCase();
const filtered = notes.filter(note =>
note.title.toLowerCase().includes(query) ||
note.content.toLowerCase().includes(query) ||
note.tags.some(t => t.includes(query))
);
const list = document.getElementById('notesList');
if (filtered.length === 0) {
list.innerHTML = '<div style="text-align: center; opacity: 0.5; padding: 20px;">No results</div>';
return;
}
list.innerHTML = filtered.map(note => {
const preview = note.content.substring(0, 60) || 'Empty note';
const date = new Date(note.updated).toLocaleDateString();
const active = note.id === currentNoteId ? 'active' : '';
const fav = note.favorite ? 'favorite' : '';
return `
  <div class="note-item ${active} ${fav}" onclick="loadNote(${note.id})">
    <div class="note-item-title">${note.title || 'Untitled'}</div>
    <div class="note-item-preview">${preview}</div>
    <div class="note-item-meta">
      <span>${date}</span>
      <span>${note.content.split(' ').length} words</span>
    </div>
  </div>
`;
}).join('');
}
function exportNote() {
if (!currentNoteId) return;
const note = notes.find(n => n.id === currentNoteId);
if (!note) return;
const text = ${note.title}\n\n${note.content}\n\nTags: ${note.tags.join(', ')};
const blob = new Blob([text], { type: 'text/plain' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = ${note.title || 'note'}.txt;
a.click();
URL.revokeObjectURL(url);
}
function formatText(format) {
const editor = document.getElementById('noteEditor');
const start = editor.selectionStart;
const end = editor.selectionEnd;
const selected = editor.value.substring(start, end);
if (!selected) return;
let formatted = selected;
if (format === 'bold') formatted = **${selected}**;
if (format === 'italic') formatted = *${selected}*;
if (format === 'underline') formatted = __${selected}__;
if (format === 'strike') formatted = ~~${selected}~~;
editor.value = editor.value.substring(0, start) + formatted + editor.value.substring(end);
editor.focus();
editor.setSelectionRange(start, start + formatted.length);
updateCurrentNote();
}
function insertBullet() {
const editor = document.getElementById('noteEditor');
const pos = editor.selectionStart;
editor.value = editor.value.substring(0, pos) + '\n‚Ä¢ ' + editor.value.substring(pos);
editor.focus();
editor.setSelectionRange(pos + 3, pos + 3);
updateCurrentNote();
}
function insertNumber() {
const editor = document.getElementById('noteEditor');
const pos = editor.selectionStart;
editor.value = editor.value.substring(0, pos) + '\n1. ' + editor.value.substring(pos);
editor.focus();
editor.setSelectionRange(pos + 4, pos + 4);
updateCurrentNote();
}
function insertCheckbox() {
const editor = document.getElementById('noteEditor');
const pos = editor.selectionStart;
editor.value = editor.value.substring(0, pos) + '\n‚òê ' + editor.value.substring(pos);
editor.focus();
editor.setSelectionRange(pos + 3, pos + 3);
updateCurrentNote();
}
function insertHeading() {
const editor = document.getElementById('noteEditor');
const pos = editor.selectionStart;
editor.value = editor.value.substring(0, pos) + '\n# ' + editor.value.substring(pos);
editor.focus();
editor.setSelectionRange(pos + 3, pos + 3);
updateCurrentNote();
}
function insertQuote() {
const editor = document.getElementById('noteEditor');
const pos = editor.selectionStart;
editor.value = editor.value.substring(0, pos) + '\n> ' + editor.value.substring(pos);
editor.focus();
editor.setSelectionRange(pos + 3, pos + 3);
updateCurrentNote();
}
function insertCode() {
const editor = document.getElementById('noteEditor');
const start = editor.selectionStart;
const end = editor.selectionEnd;
const selected = editor.value.substring(start, end);
const formatted = \${selected || 'code'}``;
editor.value = editor.value.substring(0, start) + formatted + editor.value.substring(end);
editor.focus();
updateCurrentNote();
}
function initVoice() {
if ('webkitSpeechRecognition' in window) {
recognition = new webkitSpeechRecognition();
recognition.continuous = true;
recognition.interimResults = true;
recognition.onresult = (event) => {
  let transcript = '';
  for (let i = event.resultIndex; i < event.results.length; i++) {
    transcript += event.results[i][0].transcript;
  }
  
  const editor = document.getElementById('noteEditor');
  const pos = editor.selectionStart;
  editor.value = editor.value.substring(0, pos) + transcript + editor.value.substring(pos);
  updateCurrentNote();
  updateStats();
};

recognition.onerror = (event) => {
  console.error('Voice error:', event.error);
  stopVoice();
};
}
}
function startVoice() {
if (!recognition) {
alert('Voice input not supported in your browser');
return;
}
if (isRecording) {
stopVoice();
} else {
recognition.start();
isRecording = true;
document.getElementById('voiceBtn').classList.add('recording');
document.getElementById('voiceBtn').textContent = 'üî¥ Recording';
}
}
function stopVoice() {
if (recognition && isRecording) {
recognition.stop();
isRecording = false;
document.getElementById('voiceBtn').classList.remove('recording');
document.getElementById('voiceBtn').textContent = 'üé§ Voice';
}
}
function aiSummarize() {
if (!currentNoteId) return;
const note = notes.find(n => n.id === currentNoteId);
if (!note || !note.content.trim()) {
alert('Write some content first!');
return;
}
const words = note.content.split(' ');
const summary = words.slice(0, 50).join(' ') + '...';
const newNote = {
id: Date.now(),
title: Summary: ${note.title},
content: AI Summary of "${note.title}"\n\n${summary}\n\nKey Points:\n‚Ä¢ Main idea extracted\n‚Ä¢ Condensed from ${words.length} words,
created: new Date().toISOString(),
updated: new Date().toISOString(),
tags: ['summary', 'ai'],
favorite: false,
folder: note.folder
};
notes.unshift(newNote);
saveNotes();
renderNotes();
alert('‚ú® AI Summary created!');
}
function checkAI() {
const content = document.getElementById('noteEditor').value;
if (content.length < 100) return;
const suggestions = [
'Consider adding a summary at the top',
'Break this into sections with headings',
'Add bullet points for clarity'
];
if (content.length > 500 && !content.includes('#')) {
document.getElementById('aiSuggestions').style.display = 'block';
document.getElementById('suggestionsList').innerHTML =
suggestions.map(s => <div class="suggestion-item">${s}</div>).join('');
}
}
function filterByFolder(folder) {
currentFolder = folder;
document.querySelectorAll('.folder-item').forEach(el => el.classList.remove('active'));
event.target.classList.add('active');
renderNotes();
}
function setTheme(theme) {
document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
event.target.classList.add('active');
if (theme === 'light') {
document.body.classList.add('light');
} else if (theme === 'dark') {
document.body.classList.remove('light');
} else {
const hour = new Date().getHours();
if (hour >= 18 || hour < 6) {
document.body.classList.remove('light');
} else {
document.body.classList.add('light');
}
}
localStorage.setItem('omniNotesTheme', theme);
}
function showTemplates() {
document.getElementById('templatesModal').style.display = 'flex';
}
function hideTemplates() {
document.getElementById('templatesModal').style.display = 'none';
}
function toggleSidebar() {
document.getElementById('sidebar').classList.toggle('open');
}
function saveNotes() {
localStorage.setItem('omniNotes', JSON.stringify(notes));
}
// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
if (e.ctrlKey || e.metaKey) {
if (e.key === 'n') {
e.preventDefault();
createNewNote();
}
if (e.key === 's') {
e.preventDefault();
updateCurrentNote();
}
if (e.key === 'f') {
e.preventDefault();
document.getElementById('searchInput').focus();
}
if (e.key === 'b') {
e.preventDefault();
formatText('bold');
}
if (e.key === 'i') {
e.preventDefault();
formatText('italic');
}
if (e.key === 'u') {
e.preventDefault();
formatText('underline');
}
}
});
// Auto-save
setInterval(() => {
if (currentNoteId) {
updateCurrentNote();
}
}, 30000);
init();
</script>
</body>
</html></parameter>