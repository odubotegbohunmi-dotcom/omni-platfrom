<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OMNI ‚Ä¢ Get Started</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Full screen fix */
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      overflow: hidden;
    }

    .auth-page {
      position: relative;
      overflow: hidden;
      min-height: 100vh;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    /* Animated background particles */
    .particles {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(56, 189, 248, 0.5);
      border-radius: 50%;
      animation: float 20s infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
    }

    /* Glowing orbs */
    .glow-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(80px);
      opacity: 0.3;
      animation: pulse 8s ease-in-out infinite;
    }

    .orb-1 {
      width: 300px;
      height: 300px;
      background: #38bdf8;
      top: -100px;
      left: -100px;
      animation-delay: 0s;
    }

    .orb-2 {
      width: 400px;
      height: 400px;
      background: #6366f1;
      bottom: -150px;
      right: -150px;
      animation-delay: 4s;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.3; }
      50% { transform: scale(1.2); opacity: 0.5; }
    }

    /* Enhanced auth box */
    .auth-box {
      position: relative;
      z-index: 10;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(56, 189, 248, 0.3);
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6),
                  0 0 100px rgba(56, 189, 248, 0.1);
      animation: slideIn 0.6s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .auth-box h1 {
      background: linear-gradient(135deg, #38bdf8, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2.5rem;
      margin-bottom: 8px;
      animation: titleGlow 3s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }

    /* Input glow effect */
    .auth-box input {
      transition: all 0.3s;
    }

    .auth-box input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3),
                  0 0 30px rgba(56, 189, 248, 0.2);
      transform: translateY(-2px);
    }

    /* Button animations */
    .auth-box .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s;
    }

    .auth-box .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .auth-box .btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .auth-box .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(56, 189, 248, 0.5);
    }

    /* Messages */
    #errorMessage, #successMessage {
      animation: messageSlide 0.4s ease-out;
    }

    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-left: 8px;
      vertical-align: middle;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Logo */
    .auth-logo {
      font-size: 3rem;
      margin-bottom: 20px;
      animation: float-logo 3s ease-in-out infinite;
    }

    @keyframes float-logo {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Switch link */
    .switch-link {
      position: relative;
      display: inline-block;
    }

    .switch-link::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: #38bdf8;
      transition: width 0.3s;
    }

    .switch-link:hover::after {
      width: 100%;
    }

    /* Dashboard */
    #userDashboard {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Back link */
    .back-link {
      transition: all 0.3s;
    }

    .back-link:hover {
      color: #38bdf8;
      transform: translateX(-5px);
    }
  </style>
</head>
<body>

<div class="auth-page">
  <!-- Animated background -->
  <div class="particles" id="particles"></div>
  <div class="glow-orb orb-1"></div>
  <div class="glow-orb orb-2"></div>

  <div class="auth-box">
    <div class="auth-logo">üöÄ</div>
    <h1>Welcome to OMNI</h1>
    <p id="authMode" style="opacity: 0.8; margin-bottom: 30px;">Create your account</p>
    
    <div id="authForm">
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password (min 6 characters)" required>
      
      <div id="errorMessage" style="color: #f87171; margin: 12px 0; display: none; padding: 12px; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border-left: 3px solid #ef4444;"></div>
      <div id="successMessage" style="color: #4ade80; margin: 12px 0; display: none; padding: 12px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; border-left: 3px solid #22c55e;"></div>
      
      <button class="btn primary" id="signupBtn" onclick="handleSignup()">
        <span>Sign Up</span>
      </button>
      <button class="btn secondary" id="loginBtn" onclick="handleLogin()" style="display: none;">
        <span>Log In</span>
      </button>
      
      <p style="margin-top: 20px; opacity: 0.7; font-size: 0.9rem;">
        <span id="switchText">Already have an account?</span>
        <a href="#" onclick="toggleMode(); return false;" class="switch-link" style="color: #38bdf8; text-decoration: none; margin-left: 5px;">
          <span id="switchLink">Log in here</span>
        </a>
      </p>
    </div>
    
    <div id="userDashboard" style="display: none;">
      <h2 style="font-size: 2rem; margin-bottom: 10px;">Welcome back! üéâ</h2>
      <p id="userEmail" style="margin: 20px 0; color: #38bdf8; font-size: 1.1rem;"></p>
      <button class="btn primary" onclick="location.href='index.html'">Go to Dashboard</button>
      <button class="btn secondary" onclick="handleLogout()" style="margin-top: 12px;">Log Out</button>
    </div>
    
    <a href="index.html" class="back-link" style="display: inline-block; margin-top: 24px;">‚Üê Back to Home</a>
  </div>
</div>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

  const firebaseConfig = {
    apiKey: "AIzaSyDo4R4QbOv8mIbO5NK6k7N72QwGLEeTXIA",
    authDomain: "omni-platform-e5bce.firebaseapp.com",
    projectId: "omni-platform-e5bce",
    storageBucket: "omni-platform-e5bce.firebasestorage.app",
    messagingSenderId: "263102189066",
    appId: "1:263102189066:web:5d8468848e4a8104ad99f3"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.auth = auth;
  window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
  window.signOut = signOut;

  onAuthStateChanged(auth, (user) => {
    if (user) {
      document.getElementById('authForm').style.display = 'none';
      document.getElementById('userDashboard').style.display = 'block';
      document.getElementById('userEmail').textContent = user.email;
    } else {
      document.getElementById('authForm').style.display = 'block';
      document.getElementById('userDashboard').style.display = 'none';
    }
  });
</script>

<script>
  // Create floating particles
  const particlesContainer = document.getElementById('particles');
  for (let i = 0; i < 30; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 20 + 's';
    particle.style.animationDuration = (15 + Math.random() * 10) + 's';
    particlesContainer.appendChild(particle);
  }

  let isLoginMode = false;

  function toggleMode() {
    isLoginMode = !isLoginMode;
    
    if (isLoginMode) {
      document.getElementById('authMode').textContent = 'Log in to your account';
      document.getElementById('signupBtn').style.display = 'none';
      document.getElementById('loginBtn').style.display = 'block';
      document.getElementById('switchText').textContent = "Don't have an account?";
      document.getElementById('switchLink').textContent = 'Sign up here';
    } else {
      document.getElementById('authMode').textContent = 'Create your account';
      document.getElementById('signupBtn').style.display = 'block';
      document.getElementById('loginBtn').style.display = 'none';
      document.getElementById('switchText').textContent = 'Already have an account?';
      document.getElementById('switchLink').textContent = 'Log in here';
    }
    
    clearMessages();
  }

  function showError(message) {
    const errorDiv = document.getElementById('errorMessage');
    errorDiv.innerHTML = '‚ùå ' + message;
    errorDiv.style.display = 'block';
    document.getElementById('successMessage').style.display = 'none';
  }

  function showSuccess(message) {
    const successDiv = document.getElementById('successMessage');
    successDiv.innerHTML = '‚úÖ ' + message;
    successDiv.style.display = 'block';
    document.getElementById('errorMessage').style.display = 'none';
  }

  function clearMessages() {
    document.getElementById('errorMessage').style.display = 'none';
    document.getElementById('successMessage').style.display = 'none';
  }

  function showLoading(button) {
    const spinner = '<span class="spinner"></span>';
    button.innerHTML = button.textContent + spinner;
    button.disabled = true;
  }

  function hideLoading(button, text) {
    button.innerHTML = '<span>' + text + '</span>';
    button.disabled = false;
  }

  async function handleSignup() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const btn = document.getElementById('signupBtn');
    
    clearMessages();
    
    if (!email || !password) {
      showError('Please fill in all fields');
      return;
    }
    
    if (password.length < 6) {
      showError('Password must be at least 6 characters');
      return;
    }
    
    showLoading(btn);
    
    try {
      await window.createUserWithEmailAndPassword(window.auth, email, password);
      showSuccess('Account created! Redirecting...');
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 1500);
    } catch (error) {
      hideLoading(btn, 'Sign Up');
      if (error.code === 'auth/email-already-in-use') {
        showError('This email is already registered. Try logging in instead.');
      } else if (error.code === 'auth/invalid-email') {
        showError('Please enter a valid email address');
      } else if (error.code === 'auth/weak-password') {
        showError('Password should be at least 6 characters');
      } else {
        showError(error.message);
      }
    }
  }

  async function handleLogin() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const btn = document.getElementById('loginBtn');
    
    clearMessages();
    
    if (!email || !password) {
      showError('Please fill in all fields');
      return;
    }
    
    showLoading(btn);
    
    try {
      await window.signInWithEmailAndPassword(window.auth, email, password);
      showSuccess('Logged in! Redirecting...');
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 1500);
    } catch (error) {
      hideLoading(btn, 'Log In');
      if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {
        showError('Invalid email or password');
      } else if (error.code === 'auth/invalid-email') {
        showError('Please enter a valid email address');
      } else {
        showError(error.message);
      }
    }
  }

  async function handleLogout() {
    try {
      await window.signOut(window.auth);
      showSuccess('Logged out successfully!');
      setTimeout(() => {
        location.reload();
      }, 1000);
    } catch (error) {
      showError('Error logging out: ' + error.message);
    }
  }

  // Enter key support
  document.addEventListener('DOMContentLoaded', () => {
    const handleEnter = (e) => {
      if (e.key === 'Enter') {
        if (isLoginMode) handleLogin();
        else handleSignup();
      }
    };
    
    document.getElementById('email').addEventListener('keypress', handleEnter);
    document.getElementById('password').addEventListener('keypress', handleEnter);
  });
</script>

</body>
</html>
